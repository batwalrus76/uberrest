var util = require('util');
    var lockmethod  =  require('..');
    var Position = lockmethod.Position;

		var time = 3000;	

		var obj = { changeState  :  lockmethod(
			new Position(1,["name"]),
			function(id,obj,cb){
				setTimeout(function(){
					cb("id="+id+" | name="+ ' | time= '+time)		
				},time)	
				time -= 300;
			}
		)
		}


		obj.changeState('id001',{name:'aaa'},function(r,next){
			var id001a = r;	
			var id002a;
			var id001next = next;
			var id002next;
			console.log('000')
			obj.changeState('id002',{name:'baa'},function(r,next){
				id002a = r;
				id002next = next;
				id001next();
				id002next();
				console.log(111)
			});
		});

		obj.changeState('id001',{name:'aaa'},function(r,next){
				console.log(22)
		next();	
				});

		obj.changeState('id002',{name:'aaa'},function(r,next){
				console.log(33)
		next();
		});

			

